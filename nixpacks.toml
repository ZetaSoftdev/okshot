providers = ['...', 'python']
[phases.setup]
aptPkgs = ['...','git', 'ffmpeg', 'imagemagick', 'libmagic1', 'python3-venv', 'python3-pip']

[phases.bin-path]
cmds = [
  'export PATH="/usr/local/bin:$PATH"',  # Add this line
  'echo $PATH'  # Optional: To check the updated PATH,
  'source ~/.bash_profile',
]
[phases.python-env]
# Set up and activate the Python virtual environment
cmds = [
  "python3 -m venv /myenv",
  "source /myenv/bin/activate",
]
[phase.copy-req-txt]
  onlyIncludeFiles = ['requirements.txt']
[phases.install-pkgs]
cmds = [
  "pip install -r requirements.txt",
  "pip install torch==2.0.0 torchvision==0.15.0 torchaudio==2.0.0 --index-url https://download.pytorch.org/whl/cpu"
]
[phase.copy-pkg-json]
  onlyIncludeFiles = ['package.json']
[phases.npm-install]
# Install Node.js dependencies with retries
cmds = [
  "npm config set fetch-retries 5",
  "npm config set fetch-retry-mintimeout 20000",
  "npm config set fetch-retry-maxtimeout 120000",
  "npm install"
]
[phase.copy-all-files]
  onlyIncludeFiles = []

[phases.build]
cmds = ["npm run build"]

[phases.start]
cmds = ["npm run start"]
dependsOn = ["build"]

